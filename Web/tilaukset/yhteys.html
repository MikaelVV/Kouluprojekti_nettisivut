<!DOCTYPE html>
<html>
    <head>
        <style>
            h1 {text-align: center;}
            header {text-align: center;}
            body {text-align: center;}
        </style>
        <meta charset="UTF-8">
        <title>Tilaukset</title>
    </head>
    <body>
        <header> <h1>Tilaushaku</h1> </header>

        <div class="topnav">
            <input type="text" placeholder="Haku...">

        </div>

        <table class="table table-striped">
            <tr class="bg-info">
                <th>Order ID</th>
                <th>Customer ID</th>
                <th>Customer</th> 

            </tr>

            <tbody id="informationTable">

            </tbody>
        </table>
        <nav>   
            <ul>    
                <li><a href="../index.html"> Koti</a> </li>
                <li> Ota yhteytt√§</li>
            </ul>
        </nav> 
        <script>
            fetch("https://www.cc.puv.fi/~asa/cgi-bin/fetchOrders.py")
                .then(res => {
                    return res.json();
                })
                .then(data =>{
                    console.log(data)
                    data.forEach(customersearch =>{
                        const markup = `<li>${customersearch.orderid}</li>`;
                        const markup2 = `<li>${customersearch.customerid}</li>`;
                        const markup3 = `<li>${customersearch.customer}</li>`;
                        

                        document.querySelector("ul").insertAdjacentHTML("beforeend", markup);
                        document.querySelector("ul").insertAdjacentHTML("beforeend", markup2);
                        document.querySelector("ul").insertAdjacentHTML("beforeend", markup3);


                    })
                })
                .catch(error => console.log(error))
        
        /*buildTable()
        function buildTable(data){
            const table = document.getElementById("informationTable")
            
            for (const i = 0; i < data.lenght; i++){
                const row = `<tr>
                                    <td>${data[i].orderid}
                                    <td>${data[i].customerid}
                                    <td>${data[i].customer}
                            </tr>`
                table.insertAdjacentHTML += row
            }
        }*/
        </script>
    </body>
</html> 